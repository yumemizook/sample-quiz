<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <title>Game Wiki</title>
    <link rel="stylesheet" href="index.css" />
    <script src="https://kit.fontawesome.com/ced4c4a7f8.js" crossorigin="anonymous"></script>
    <style>
      .wiki-container {
        max-width: 1000px;
        width: 90%;
        margin: 40px auto;
        padding: 30px;
        background-color: rgba(0, 0, 0, 0.85);
        border-radius: 15px;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
        backdrop-filter: blur(10px);
      }

      .wiki-header {
        text-align: center;
        margin-bottom: 40px;
      }

      .wiki-header h1 {
        font-size: 3em;
        color: #dbffff;
        margin-bottom: 10px;
        text-shadow: 0 2px 10px rgba(219, 255, 255, 0.3);
      }

      .wiki-header p {
        font-size: 1.2em;
        color: rgba(255, 255, 255, 0.8);
      }

      .wiki-section {
        margin-bottom: 40px;
        padding: 25px;
        background: linear-gradient(
          135deg,
          rgba(255, 255, 255, 0.1) 0%,
          rgba(255, 255, 255, 0.05) 100%
        );
        border: 2px solid rgba(255, 255, 255, 0.2);
        border-radius: 12px;
      }

      .wiki-section h2 {
        font-size: 2em;
        color: #dbffff;
        margin-bottom: 20px;
        border-bottom: 2px solid rgba(219, 255, 255, 0.3);
        padding-bottom: 10px;
      }

      .wiki-section h3 {
        font-size: 1.5em;
        color: #adffcd;
        margin-top: 25px;
        margin-bottom: 15px;
      }

      .wiki-section h4 {
        font-size: 1.2em;
        color: #4a90e2;
        margin-top: 20px;
        margin-bottom: 10px;
      }

      .mode-info {
        background: rgba(0, 0, 0, 0.3);
        padding: 20px;
        border-radius: 8px;
        margin: 15px 0;
        border-left: 4px solid;
      }

      .mode-info.easy {
        border-left-color: #adffcd;
      }

      .mode-info.normal {
        border-left-color: #dbffff;
      }

      .mode-info.master {
        border-left-color: #4a90e2;
      }

      .mode-info.race {
        border-left-color: #ff8c42;
      }

      .mode-info.hell {
        border-left-color: #ff6b6b;
      }

      .mode-info h3 {
        margin-top: 0;
      }

      .info-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 15px;
        margin: 15px 0;
      }

      .info-item {
        background: rgba(0, 0, 0, 0.2);
        padding: 15px;
        border-radius: 8px;
      }

      .info-item strong {
        color: #dbffff;
        display: block;
        margin-bottom: 5px;
      }

      .info-item span {
        color: rgba(255, 255, 255, 0.9);
      }

      .grade-list {
        list-style: none;
        padding: 0;
      }

      .grade-list li {
        padding: 8px 0;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      }

      .grade-list li:last-child {
        border-bottom: none;
      }

      .grade-badge {
        display: inline-block;
        padding: 4px 12px;
        border-radius: 4px;
        font-weight: bold;
        margin-right: 10px;
      }

      .grade-badge.white {
        background: rgba(255, 255, 255, 0.2);
        color: #ffffff;
      }

      .grade-badge.green {
        background: rgba(0, 255, 0, 0.2);
        color: #00ff00;
      }

      .grade-badge.orange {
        background: rgba(255, 136, 0, 0.2);
        color: #ff8800;
      }

      .back-button {
        display: inline-block;
        margin: 20px 0;
        padding: 12px 24px;
        background: linear-gradient(135deg, #dbffff 0%, #b8f0e0 100%);
        color: rgb(104, 104, 104);
        text-decoration: none;
        border-radius: 8px;
        font-weight: bold;
        transition: all 0.3s ease;
      }

      .back-button:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 15px rgba(219, 255, 255, 0.3);
      }

      .feature-list {
        list-style: none;
        padding: 0;
      }

      .feature-list li {
        padding: 10px 0;
        padding-left: 25px;
        position: relative;
      }

      .feature-list li::before {
        content: "‚úì";
        position: absolute;
        left: 0;
        color: #adffcd;
        font-weight: bold;
      }

      .warning-box {
        background: rgba(255, 107, 107, 0.2);
        border: 2px solid rgba(255, 107, 107, 0.5);
        border-radius: 8px;
        padding: 15px;
        margin: 15px 0;
      }

      .warning-box strong {
        color: #ff6b6b;
      }

      .time-table {
        width: 100%;
        border-collapse: collapse;
        margin: 15px 0;
        background: rgba(0, 0, 0, 0.3);
        border-radius: 8px;
        overflow: hidden;
      }

      .time-table thead {
        background: rgba(219, 255, 255, 0.1);
      }

      .time-table th {
        padding: 12px;
        text-align: left;
        color: #dbffff;
        font-weight: bold;
        border-bottom: 2px solid rgba(219, 255, 255, 0.3);
      }

      .time-table td {
        padding: 10px 12px;
        color: rgba(255, 255, 255, 0.9);
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      }

      .time-table tbody tr:hover {
        background: rgba(255, 255, 255, 0.05);
      }

      .time-table tbody tr:last-child td {
        border-bottom: none;
      }

      .time-table .question-range {
        font-weight: 500;
        color: #adffcd;
      }

      .time-table .time-limit {
        text-align: center;
        font-weight: bold;
        color: #dbffff;
      }

      @media (max-width: 768px) {
        .wiki-container {
          padding: 20px;
          margin: 20px auto;
        }

        .wiki-header h1 {
          font-size: 2em;
        }

        .wiki-section h2 {
          font-size: 1.5em;
        }

        .info-grid {
          grid-template-columns: 1fr;
        }
      }
    </style>
  </head>
  <body>
    <div class="status">
      <a login href="signin.html">Login</a>
      <a signup href="signup.html">Signup</a>
      <a logout class="hide" href="index.html">Log out</a>
      <a href="index.html">Home</a>
      <div class="player-info hide" id="playerInfo">
        <div class="player-info-left">
          <span class="name"></span>
          <span class="player-level" id="playerLevel"></span>
        </div>
        <div class="player-avatar hide" id="playerAvatar">
          <img id="playerAvatarImg" src="" alt="Avatar" />
          <div class="player-avatar-placeholder">üë§</div>
        </div>
      </div>
    </div>

    <div class="wiki-container">
      <div class="wiki-header">
        <h1>üìñ Game Wiki</h1>
        <p>(Tehnically) Complete guide to Icy's Quiz Challenge</p>
      </div>

      <a href="index.html" class="back-button">‚Üê Back to Menu</a>

      <div class="wiki-section">
        <h2><i class="fas fa-gamepad" style="color: #9b59b6;"></i> Game Overview</h2>
        <p>
          Icy's Quiz Challenge is a TGM-style quiz game featuring multiple
          difficulty modes, time limits, grade systems, and leaderboards. Test
          your knowledge and speed across four challenging modes!
        </p>

        <h3>General Features</h3>
        <ul class="feature-list">
          <li>Multiple difficulty modes with unique mechanics</li>
          <li>Real-time grade calculation and display</li>
          <li>Global leaderboards and personal statistics</li>
          <li>Keyboard, controller, and mobile support</li>
          <li>Input type tracking (keyboard/controller/mobile)</li>
          <li>Anti-stall mechanism (15-minute time limit)</li>
          <li>Background music and sound effects(If you know which game does the soundtracks came from, you are a real one)</li>
          <li>Mode settings menu with customizable modifiers (collapsed by default)</li>
          <li>Clear type system tracking completion conditions</li>
          <li>Modifier tracking and display in rankings and stats</li>
        </ul>
      </div>

      <div class="wiki-section">
        <h2><i class="fas fa-seedling" style="color: #2ecc71;"></i> Easy Mode</h2>
        <div class="mode-info easy">
          <h3>Perfect for Beginners</h3>
          <div class="info-grid">
            <div class="info-item">
              <strong>Questions:</strong>
              <span>30 questions</span>
            </div>
            <div class="info-item">
              <strong>Difficulty:</strong>
              <span>Easy</span>
            </div>
            <div class="info-item">
              <strong>Time Limit:</strong>
              <span>No per-question timer</span>
            </div>
            <div class="info-item">
              <strong>Kill Timer:</strong>
              <span>15 minutes (2s per question after)</span>
            </div>
          </div>

          <h4>Scoring System</h4>
          <p>Grade points are calculated using:</p>
          <ul>
            <li><strong>Base Score:</strong> 500 points per question</li>
            <li><strong>Time Bonus:</strong> 30 seconds maximum time bonus</li>
            <li>
              <strong>Completion Bonus:</strong> 5-minute completion bonus (if
              completed in under 5 minutes)
            </li>
          </ul>

          <h4>Grades</h4>
          <ul class="grade-list">
            <li><strong>"Cool!!"</strong> - 100% correct answers</li>
            <li><strong>"Good!"</strong> - 50% or more correct</li>
            <li><strong>No Grade</strong> - Less than 50% correct</li>
            <li><strong>"Invalid"</strong> - Run took 15 minutes or longer</li>
          </ul>

          <h4>Special Features</h4>
          <ul class="feature-list">
            <li>No time pressure - answer at your own pace</li>
            <li>Perfect for learning the game mechanics</li>
            <li>Simple scoring system</li>
          </ul>
        </div>
      </div>

      <div class="wiki-section">
        <h2><i class="fas fa-star" style="color: #ffd700;"></i> Normal Mode</h2>
        <div class="mode-info normal">
          <h3>Standard Challenge</h3>
          <div class="info-grid">
            <div class="info-item">
              <strong>Questions:</strong>
              <span>100 questions</span>
            </div>
            <div class="info-item">
              <strong>Difficulty:</strong>
              <span>Medium</span>
            </div>
            <div class="info-item">
              <strong>Time Limit:</strong>
              <span>60 seconds per question (after Q50)</span>
            </div>
            <div class="info-item">
              <strong>Kill Timer:</strong>
              <span>15 minutes total</span>
            </div>
          </div>

          <h4>Scoring System</h4>
          <p>Grade points are calculated using:</p>
          <ul>
            <li><strong>Base Score:</strong> 500 points per question</li>
            <li>
              <strong>Time Bonus:</strong> 30 seconds (before Q50) or remaining
              timer time (after Q50)
            </li>
          </ul>

          <h4>Special Features</h4>
          <ul class="feature-list">
            <li>Unlimited time for answering before question 50</li>
            <li>60-second per-question timer for questions 50-100</li>
            <li>Balanced difficulty and scoring</li>
          </ul>
        </div>
      </div>

      <div class="wiki-section">
        <h2><i class="fas fa-crown" style="color: #ffd700;"></i> Master Mode</h2>
        <div class="mode-info master">
          <h3>Expert Level</h3>
          <div class="info-grid">
            <div class="info-item">
              <strong>Questions:</strong>
              <span>100 questions</span>
            </div>
            <div class="info-item">
              <strong>Difficulty:</strong>
              <span>Medium</span>
            </div>
            <div class="info-item">
              <strong>Time Limit:</strong>
              <span>Shrinking per-question timers</span>
            </div>
            <div class="info-item">
              <strong>Kill Timer:</strong>
              <span>15 minutes</span>
            </div>
          </div>

          <h4>Scoring System</h4>
          <p>Grade points are calculated using:</p>
          <ul>
            <li><strong>Base Score:</strong> 500 points per question</li>
            <li>
              <strong>Multiplier:</strong> Varies by question range:
              <ul>
                <li>Questions 0-24: 1x</li>
                <li>Questions 25-49: 2x</li>
                <li>Questions 50-74: 3x</li>
                <li>Questions 75-99: 4x</li>
              </ul>
            </li>
            <li>
              <strong>Time Bonus:</strong> Based on remaining time per question
            </li>
          </ul>

          <h4>Time Limits</h4>
          <p>Per-question timers shrink as you progress:</p>
          <table class="time-table">
            <thead>
              <tr>
                <th>Question Range</th>
                <th class="time-limit">Time Limit</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="question-range">0-10</td>
                <td class="time-limit">30 seconds</td>
              </tr>
              <tr>
                <td class="question-range">11-16</td>
                <td class="time-limit">25 seconds</td>
              </tr>
              <tr>
                <td class="question-range">17-20</td>
                <td class="time-limit">20 seconds</td>
              </tr>
              <tr>
                <td class="question-range">21-24</td>
                <td class="time-limit">30 seconds</td>
              </tr>
              <tr>
                <td class="question-range">25-26</td>
                <td class="time-limit">27 seconds</td>
              </tr>
              <tr>
                <td class="question-range">27-28</td>
                <td class="time-limit">24 seconds</td>
              </tr>
              <tr>
                <td class="question-range">29-30</td>
                <td class="time-limit">21 seconds</td>
              </tr>
              <tr>
                <td class="question-range">31-36</td>
                <td class="time-limit">19 seconds</td>
              </tr>
              <tr>
                <td class="question-range">37-40</td>
                <td class="time-limit">22 seconds</td>
              </tr>
              <tr>
                <td class="question-range">41-50</td>
                <td class="time-limit">20 seconds</td>
              </tr>
              <tr>
                <td class="question-range">51-60</td>
                <td class="time-limit">18 seconds</td>
              </tr>
              <tr>
                <td class="question-range">61-70</td>
                <td class="time-limit">15 seconds</td>
              </tr>
              <tr>
                <td class="question-range">71-80</td>
                <td class="time-limit">13 seconds</td>
              </tr>
              <tr>
                <td class="question-range">81-99</td>
                <td class="time-limit">10 seconds</td>
              </tr>
            </tbody>
          </table>

          <h4>Grade System</h4>
          <p>Master Mode uses a comprehensive grade system:</p>
          <ul class="grade-list">
            <li>
              <span class="grade-badge white">9, 8, 7, 6, 5, 4, 3, 2, 1</span> -
              Numeric grades (9 is lowest, 1 is highest)
            </li>
            <li>
              <span class="grade-badge white"
                >S1, S2, S3, S4, S5, S6, S7, S8, S9</span
              >
              - S grades (S1 is lowest, S9 is highest)
            </li>
            <li>
              <span class="grade-badge orange">GM (Orange Line)</span> - Grand
              Master: S9 grade, all questions completed, under 5 minutes,
              1,050,000+ grade points
            </li>
            <li>
              <span class="grade-badge green">GM (Green Line)</span> - Grand
              Master: S9 grade, all questions completed, under 6 minutes,
              1,050,000+ grade points
            </li>
          </ul>

          <h4>Line Colors</h4>
          <p>Line colors indicate completion speed for non-GM grades are as follows:</p>
          <ul>
            <li><strong>Orange Line:</strong> Completed in under 6 minutes</li>
            <li><strong>Green Line:</strong> Completed in under 8 minutes</li>
            <li><strong>White Line:</strong> Standard completion</li>
          </ul>

          <h4>Special Features</h4>
          <ul class="feature-list">
            <li>TGM1-style grading system</li>
            <li>TGM2-style BGM</li>
          </ul>
        </div>
      </div>

      <div class="wiki-section">
        <h2><i class="fas fa-bolt" style="color: #ffff00;"></i> Race Mode</h2>
        <div class="mode-info race">
          <h3>Speed Challenge</h3>
          <div class="info-grid">
            <div class="info-item">
              <strong>Questions:</strong>
              <span>130 questions</span>
            </div>
            <div class="info-item">
              <strong>Difficulty:</strong>
              <span>Extreme Challenge</span>
            </div>
            <div class="info-item">
              <strong>Time Limit:</strong>
              <span>Shrinking per-question timers</span>
            </div>
            <div class="info-item">
              <strong>Kill Timer:</strong>
              <span>7 minutes total (ends immediately)</span>
            </div>
          </div>

          <h4>Scoring System</h4>
          <p>Grade points are calculated using:</p>
          <ul>
            <li><strong>Base Score:</strong> 500 points per question</li>
            <li>
              <strong>Multiplier:</strong> Varies by question range:
              <ul>
                <li>Questions 0-24: 1x</li>
                <li>Questions 25-49: 2x</li>
                <li>Questions 50-74: 3x</li>
                <li>Questions 75-99: 4x</li>
                <li>Questions 100-130: 5x</li>
              </ul>
            </li>
            <li>
              <strong>Time Bonus:</strong> Based on remaining time per question
            </li>
          </ul>

          <h4>Time Limits</h4>
          <p>Per-question timers shrink as you progress:</p>
          <table class="time-table">
            <thead>
              <tr>
                <th>Question Range</th>
                <th class="time-limit">Time Limit</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="question-range">1-10</td>
                <td class="time-limit">30 seconds</td>
              </tr>
              <tr>
                <td class="question-range">11-20</td>
                <td class="time-limit">26 seconds</td>
              </tr>
              <tr>
                <td class="question-range">21-40</td>
                <td class="time-limit">18 seconds</td>
              </tr>
              <tr>
                <td class="question-range">41-50</td>
                <td class="time-limit">17 seconds</td>
              </tr>
              <tr>
                <td class="question-range">51-70</td>
                <td class="time-limit">15 seconds</td>
              </tr>
              <tr>
                <td class="question-range">71-80</td>
                <td class="time-limit">13 seconds</td>
              </tr>
              <tr>
                <td class="question-range">81-130</td>
                <td class="time-limit">12 seconds</td>
              </tr>
            </tbody>
          </table>

          <h4>Grade System</h4>
          <p>Race Mode uses a simplified grade system:</p>
          <ul class="grade-list">
            <li>
              <strong>No Grades During Play:</strong> Grade points are tracked but no grades are displayed during gameplay
            </li>
            <li>
              <span class="grade-badge orange">GM</span> - Only awarded when all 130 questions are completed. Can be achieved with orange line (under 5 minutes) or green line (under 6 minutes).
            </li>
          </ul>

          <h4>Special Features</h4>
          <ul class="feature-list">
            <li><strong>7 Minute Hard Limit:</strong> The mode ends immediately after 7 minutes, with the timer flashing red at 10 seconds remaining</li>
            <li><strong>Fading Text Elements:</strong> After question 100, random text elements fade to invisible:
              <ul>
                <li>After Q100: One element fades every 2 seconds</li>
                <li>After Q110: One element fades every 1 second</li>
                <li>After Q120: One element fades every 0.5 seconds</li>
              </ul>
            </li>
            <li><strong>Background Changes:</strong> Background changes from race.jpg to raceinvis.jpg after question 100</li>
            <li><strong>BGM Changes:</strong> Uses stage4.mp3 before question 100, switches to stage5.mp3 after question 100</li>
            <li><strong>Mode Toggle:</strong> Click the Master/Race mode button 5 times to toggle between Master and Race mode</li>
            <li><strong>Completion Tracking:</strong> Statistics show completion count (times completed with GM grade) instead of grades</li>
          </ul>
        </div>
      </div>

      <div class="wiki-section">
        <h2><i class="fas fa-fire" style="color: #ff6b35;"></i> Hell Mode</h2>
        <div class="mode-info hell">
          <h3>Ultimate Challenge</h3>
          <div class="warning-box">
            <strong><i class="fas fa-exclamation-triangle" style="color: #ffc107;"></i> Warning:</strong> Hell Mode is extremely difficult and
            are only designed to be beaten by the best of the best. Only attempt
            if you're prepared for the ultimate challenge!
          </div>

          <div class="info-grid">
            <div class="info-item">
              <strong>Questions:</strong>
              <span>200 questions</span>
            </div>
            <div class="info-item">
              <strong>Difficulty:</strong>
              <span>Hard</span>
            </div>
            <div class="info-item">
              <strong>Time Limit:</strong>
              <span>Rapidly shrinking per-question timers</span>
            </div>
            <div class="info-item">
              <strong>Kill Timer:</strong>
              <span>15 minutes total</span>
            </div>
          </div>

          <h4>Scoring System</h4>
          <p>Grade points are calculated using:</p>
          <ul>
            <li><strong>Base Score:</strong> 500 points per question</li>
            <li>
              <strong>Multiplier:</strong> Varies by question range:
              <ul>
                <li>Questions 0-24: 1x</li>
                <li>Questions 25-49: 3x</li>
                <li>Questions 50-74: 6x</li>
                <li>Questions 75-99: 10x</li>
                <li>Questions 100-129: 15x</li>
                <li>Questions 130-199: 21x</li>
              </ul>
            </li>
            <li>
              <strong>Time Bonus:</strong> Based on remaining time per question
              (timeRatio formula)
            </li>
          </ul>

          <h4>Time Limits</h4>
          <p>Per-question timers shrink dramatically:</p>
          <table class="time-table">
            <thead>
              <tr>
                <th>Question Range</th>
                <th class="time-limit">Time Limit</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="question-range">0-9</td>
                <td class="time-limit">12 seconds</td>
              </tr>
              <tr>
                <td class="question-range">10-19</td>
                <td class="time-limit">11.5 seconds</td>
              </tr>
              <tr>
                <td class="question-range">20-29</td>
                <td class="time-limit">11 seconds</td>
              </tr>
              <tr>
                <td class="question-range">30-39</td>
                <td class="time-limit">10 seconds</td>
              </tr>
              <tr>
                <td class="question-range">40-49</td>
                <td class="time-limit">9 seconds</td>
              </tr>
              <tr>
                <td class="question-range">50-59</td>
                <td class="time-limit">8.5 seconds</td>
              </tr>
              <tr>
                <td class="question-range">60-109</td>
                <td class="time-limit">7.5 seconds</td>
              </tr>
              <tr>
                <td class="question-range">110-119</td>
                <td class="time-limit">6 seconds</td>
              </tr>
              <tr>
                <td class="question-range">120-129</td>
                <td class="time-limit">4 seconds</td>
              </tr>
              <tr>
                <td class="question-range">130-139</td>
                <td class="time-limit">3.5 seconds</td>
              </tr>
              <tr>
                <td class="question-range">140-149</td>
                <td class="time-limit">3 seconds</td>
              </tr>
              <tr>
                <td class="question-range">150-159</td>
                <td class="time-limit">2.5 seconds</td>
              </tr>
              <tr>
                <td class="question-range">160-169</td>
                <td class="time-limit">2 seconds</td>
              </tr>
              <tr>
                <td class="question-range">170-179</td>
                <td class="time-limit">1.5 seconds</td>
              </tr>
              <tr>
                <td class="question-range">180-199</td>
                <td class="time-limit">1.5 seconds</td>
              </tr>
            </tbody>
          </table>

          <h4>Grade System</h4>
          <p>Hell Mode uses S grades:</p>
          <ul class="grade-list">
            <li>
              <span class="grade-badge white">S1, S2, S3, ..., S20</span> -
              Based on score (S1 = 10 questions answered correctly to S20 = 200
              questions answered correctly)
            </li>
            <li>
              <span class="grade-badge orange">Grand Master - Infinity</span> -
              The top grade, rewarded for those who are worthy...
            </li>
          </ul>

          <h4>Progressive Visual Changes</h4>
          <p>Hell Mode features dramatic visual changes as you progress:</p>
          <ul>
            <li><strong>Question 50+:</strong> Gold text color</li>
            <li>
              <strong>Question 100+:</strong> ModernDOS font applied to all text
            </li>
            <li><strong>Question 110+:</strong> Green text color</li>
            <li><strong>Question 120+:</strong> Background removed</li>
            <li>
              <strong>Question 130+:</strong> Simplistic theme (black
              background, green text, minimal UI)
            </li>
          </ul>

          <h4>Torikans</h4>
          <p>Your play will be ended when you exceed the time thresholds:</p>
          <ul>
            <li><strong>Question 50:</strong> 3:00</li>
            <li><strong>Question 100:</strong> 5:00</li>
            <li><strong>Question 130:</strong> 6:00</li>
          </ul>
          <p>
            If you fail to beat the torikan, the game will show a screen and
            your play will end prematurely.
          </p>

          <h4>Special Features</h4>
          <ul class="feature-list">
            <li>Changing backgrounds (10 different backgrounds)</li>
            <li>Grade display on the left side of the screen</li>
            <li>Credits screen for Grand Master - Infinity grade</li>
            <li>Extreme time pressure</li>
            <li>Progressive visual and audio changes</li>
          </ul>
        </div>
      </div>

      <div class="wiki-section">
        <h2>üìä Scoring & Leaderboards</h2>
        <h3>Score Submission</h3>
        <ul class="feature-list">
          <li>Scores are automatically submitted for logged-in users</li>
          <li>Abandoned runs cannot be submitted</li>
          <li>Invalid runs (15+ minutes) cannot be submitted</li>
          <li>Input type (keyboard/controller/mobile) is tracked</li>
          <li>Modifiers used (lives, time multiplier, fading mode, start question) are tracked</li>
          <li>Clear type is calculated and saved based on completion conditions</li>
        </ul>

        <h3>Clear Types</h3>
        <p>Each play receives a clear type based on how it was completed:</p>
        <ul class="grade-list">
          <li><strong>Failed</strong> - Ran out of lives or time</li>
          <li><strong>Normal Clear</strong> - Completed with default settings</li>
          <li><strong>Hard</strong> - Completed with 100 lives mode</li>
          <li><strong>Brave</strong> - Completed with 30 lives mode</li>
          <li><strong>Absolute</strong> - Completed with 10 lives mode</li>
          <li><strong>Catastrophy</strong> - Completed with 5 lives mode</li>
          <li><strong>All Correct!</strong> - Completed with 100% accuracy (all questions answered correctly)</li>
        </ul>
        <p>Clear types are displayed in rankings and player statistics, with the best clear type shown on your stats page.</p>

        <h3>Modifiers</h3>
        <p>Game modifiers can be customized in the mode settings menu:</p>
        <ul class="grade-list">
          <li><strong>Lives:</strong> Set a limited number of lives (Unlimited, 100, 30, 10, 5, or 1). Each wrong answer deducts 1 life (up to 3 times per question).</li>
          <li><strong>Time Multiplier:</strong> Adjust the time limit multiplier (0.5x to 2.0x). Lower multipliers make questions harder, higher multipliers make them easier.</li>
          <li><strong>Fading Mode:</strong> Enable text elements to fade after a certain number of seconds (2s, 3s, 4s, 5s, 6s, 7s, 8s, 9s, 10s).</li>
          <li><strong>Start Question:</strong> Begin the quiz from a specific question number (useful for practice or speedruns).</li>
        </ul>
        <p>Modifiers are displayed under the score in rankings and stats, showing which modifiers were active during each play.</p>

        <h3>Leaderboards</h3>
        <ul class="feature-list">
          <li>Global leaderboards for each mode</li>
          <li>Filter by input type (keyboard/controller/mobile)</li>
          <li>Sorted by score, then grade, then time</li>
          <li>Line colors (orange > green > white) used for tiebreaking</li>
          <li>Clear type displayed for each score</li>
          <li>Modifiers displayed under score for each entry</li>
        </ul>

        <h3>Player Statistics</h3>
        <ul class="feature-list">
          <li>Track your personal best scores and grades</li>
          <li>View your game history with clear types and modifiers</li>
          <li>Progress graphs showing score trends</li>
          <li>Filter statistics by input type</li>
          <li>Best clear type displayed on stats page</li>
          <li>Modifiers displayed under score in history table</li>
        </ul>
      </div>

      <div class="wiki-section">
        <h2><i class="fas fa-cog" style="color: #dbffff;"></i> Mode Settings</h2>
        <p>The mode settings menu appears when you select a game mode (except Secret Mode). It is collapsed by default to keep the interface clean.</p>
        
        <h3>Accessing Settings</h3>
        <ul class="feature-list">
          <li>Click on a mode button (Easy, Normal, Master, Race, or Hell) to show the settings menu</li>
          <li>The menu starts collapsed - click the title or toggle button to expand/collapse</li>
          <li>Settings are saved in the URL, so you can bookmark specific configurations</li>
        </ul>

        <h3>Available Modifiers</h3>
        <div class="info-grid">
          <div class="info-item">
            <strong>Lives:</strong>
            <span>Unlimited, 100, 30, 10, 5, or 1</span>
          </div>
          <div class="info-item">
            <strong>Time Multiplier:</strong>
            <span>0.5x to 2.0x (in 0.1x increments)</span>
          </div>
          <div class="info-item">
            <strong>Fading Mode:</strong>
            <span>2s to 10s (or disabled)</span>
          </div>
          <div class="info-item">
            <strong>Start Question:</strong>
            <span>1 to max questions for mode</span>
          </div>
        </div>

        <h3>Modifier Effects</h3>
        <ul>
          <li><strong>Lives:</strong> When enabled, wrong answers deduct lives. You can retry up to 3 times per question, but each wrong answer costs 1 life. The quiz ends when lives reach 0.</li>
          <li><strong>Time Multiplier:</strong> Multiplies all per-question time limits. 0.5x = half time, 2.0x = double time. Does not affect the 15-minute kill timer.</li>
          <li><strong>Fading Mode:</strong> Text elements (question, options, score, etc.) fade to invisible after the specified time. This adds visual difficulty to the challenge.</li>
          <li><strong>Start Question:</strong> Begin the quiz from a specific question number. Useful for practicing specific sections or speedrunning from a checkpoint.</li>
        </ul>

        <h3>Modifier Icons</h3>
        <p>During gameplay, active modifiers are displayed as icons below the pause button:</p>
        <ul>
          <li><i class="fas fa-heart" style="color: #ff6b6b;"></i> - Lives (shows number of lives)</li>
          <li><i class="fas fa-stopwatch" style="color: #4a90e2;"></i> - Time Multiplier (shows multiplier value)</li>
          <li><i class="fas fa-eye" style="color: #a29bfe;"></i> - Fading Mode (shows fade time in seconds)</li>
          <li><i class="fas fa-bullseye" style="color: #ff6b6b;"></i> - Start Question (shows starting question number)</li>
        </ul>
      </div>

      <div class="wiki-section">
        <h2><i class="fas fa-gamepad" style="color: #9b59b6;"></i> Controls</h2>
        <h3>Keyboard</h3>
        <ul>
          <li><strong>1, 2, 3, 4:</strong> Select answer options</li>
          <li><strong>Space/Enter:</strong> Submit answer</li>
          <li><strong>Arrow Keys:</strong> Navigate main menu</li>
        </ul>

        <h3>Controller</h3>
        <ul>
          <li><strong>D-Pad/Left Stick:</strong> Navigate options and menu</li>
          <li><strong>A/X Button:</strong> Select/Submit</li>
        </ul>

        <h3>Mobile</h3>
        <ul>
          <li>Touch controls for all interactions</li>
          <li>Key guides are hidden on mobile devices</li>
        </ul>
      </div>

      <div class="wiki-section">
        <h2>üí° Tips & Strategies</h2>
        <h3>General Tips</h3>
        <ul class="feature-list">
          <li>Answer quickly to maximize time bonuses</li>
          <li>Practice in Easy mode to learn the mechanics</li>
          <li>Use keyboard shortcuts for faster input</li>
          <li>Monitor your time to avoid the 15-minute kill timer</li>
        </ul>

        <h3>Master Mode Tips</h3>
        <ul class="feature-list">
          <li>Focus on accuracy - wrong answers waste time</li>
          <li>Plan ahead for the shrinking time limits</li>
          <li>Aim for 1,050,000+ grade points for GM grade</li>
          <li>Complete all questions in under 6 minutes for orange line</li>
        </ul>

        <h3>Race Mode Tips</h3>
        <ul class="feature-list">
          <li>Speed is essential - you only have 7 minutes total</li>
          <li>Practice the timer transitions to maintain rhythm</li>
          <li>After question 100, prepare for visual chaos with fading elements</li>
          <li>Watch the timer carefully - it flashes red at 10 seconds remaining</li>
          <li>Focus on completing all 130 questions for the GM grade</li>
          <li>Don't get distracted by the fading text - stay focused on the questions</li>
        </ul>

        <h3>Hell Mode Tips</h3>
        <ul class="feature-list">
          <li>Memorize common question patterns</li>
          <li>Practice with shorter time limits</li>
          <li>Be prepared for visual changes that may affect readability</li>
          <li>
            Focus on survival - completing all 200 questions is extremely
            difficult
          </li>
        </ul>
      </div>

      <div class="wiki-section" id="secretModeSection">
        <h2>??????</h2>
        <div id="secretModeContent">
          <p>There is a secret waiting to be unfold...</p>
        </div>
      </div>
      <a href="index.html" class="back-button">‚Üê Back to Menu</a>
    </div>
  </body>
  <script type="module" src="firebase.js"></script>
  <script type="module" src="hm.js"></script>
  <script type="module" src="loadBackground.js"></script>
  <script type="module" src="loadTheme.js"></script>
  <script type="module">
    import { getAuth, onAuthStateChanged } from "./firebase.js";
    import { getFirestore, collection, getDocs } from "./firebase.js";

    async function updateSecretModeWiki() {
      const auth = getAuth();
      const db = getFirestore();
      const secretModeSection = document.getElementById("secretModeSection");
      const secretModeContent = document.getElementById("secretModeContent");

      onAuthStateChanged(auth, async (user) => {
        if (!user) {
          // Not logged in - show placeholder
          secretModeContent.innerHTML = '<p>There is a secret waiting to be unfold...</p>';
          return;
        }

        try {
          const uid = user.uid;
          
          // Check if player has completed Hell Mode (unlocked secret mode)
          const hellSnap = await getDocs(collection(db, "playerData", uid, "hell"));
          const hasCompletedHell = hellSnap.empty 
            ? false 
            : hellSnap.docs.map(doc => doc.data()).some(score => score.score === 200);

          // Check if player has played secret mode at least once
          let secretSnap;
          try {
            secretSnap = await getDocs(collection(db, "playerData", uid, "secret"));
          } catch (error) {
            secretSnap = { empty: true, docs: [] };
          }
          const hasPlayedSecret = !secretSnap.empty && secretSnap.docs.length > 0;

          if (!hasCompletedHell) {
            // Not unlocked - show placeholder
            secretModeContent.innerHTML = '<p>There is a secret waiting to be unfold...</p>';
          } else if (hasCompletedHell && !hasPlayedSecret) {
            // Unlocked but not played - show gist
            secretModeContent.innerHTML = `
              <div class="mode-info" style="border-left-color: #8b00ff;">
                <h3>?????</h3>
                <p><strong>You have unlocked this mode, but have yet to experience it.</strong></p>
                <p>This is the ultimate challenge beyond Hell Mode. Complete Hell Mode (200/200) to unlock it, then experience the true horror beyond time.</p>
                <div class="warning-box">
                  <strong><i class="fas fa-exclamation-triangle" style="color: #ffc107;"></i> Warning:</strong> This mode is not for the faint of heart. Only attempt if you're truly prepared for the ultimate challenge.
                </div>
              </div>
            `;
          } else {
            // Played at least once - show full details
            secretModeContent.innerHTML = `
              <div class="mode-info" style="border-left-color: #8b00ff;">
                <h3>üíÄ ??????</h3>
                <div class="warning-box">
                  <strong><i class="fas fa-exclamation-triangle" style="color: #ffc107;"></i> Warning:</strong> The ultimate challenge beyond Hell Mode. Only the most dedicated players will survive.
                </div>

                <div class="info-grid">
                  <div class="info-item">
                    <strong>Questions:</strong>
                    <span>300 questions</span>
                  </div>
                  <div class="info-item">
                    <strong>Difficulty:</strong>
                    <span>Extreme</span>
                  </div>
                  <div class="info-item">
                    <strong>Time Limit:</strong>
                    <span>1.5 seconds per question</span>
                  </div>
                  <div class="info-item">
                    <strong>Kill Timer:</strong>
                    <span>15 minutes total</span>
                  </div>
                </div>

                <h4>Scoring System</h4>
                <p>Score is based on the number of correct answers:</p>
                <ul>
                  <li><strong>Score Range:</strong> 0-300 (one point per correct answer)</li>
                  <li>No grade points or multipliers - pure survival</li>
                  <li>Complete all 300 questions correctly to achieve the ultimate score</li>
                </ul>

                <h4>Special Features</h4>
                <ul class="feature-list">
                  <li>Simplistic theme from the start (black background, green text)</li>
                  <li>DOS font applied to all text elements</li>
                  <li>Extreme time pressure - 1.5 seconds per question</li>
                  <li>No visual changes during gameplay - pure focus on speed and accuracy</li>
                  <li>Unique BGM for the ultimate challenge</li>
                  <li>Unlocked by completing Hell Mode (200/200)</li>
                </ul>

                <h4>Visual Theme</h4>
                <p>Secret Mode features a minimalist aesthetic from the very beginning:</p>
                <ul>
                  <li><strong>Background:</strong> Pure black (#000000)</li>
                  <li><strong>Text Color:</strong> Bright green (#00ff00)</li>
                  <li><strong>Font:</strong> ModernDOS monospace font</li>
                  <li><strong>UI:</strong> Minimal borders and styling</li>
                </ul>

                <h4>Unlock Requirement</h4>
                <p>To unlock Secret Mode, you must:</p>
                <ul class="feature-list">
                  <li>Complete Hell Mode with a perfect score (200/200 correct answers)</li>
                  <li>Be logged in to your account</li>
                </ul>
              </div>
            `;
          }
        } catch (error) {
          console.error("Error updating secret mode wiki:", error);
          // On error, show placeholder
          secretModeContent.innerHTML = '<p>There is a secret waiting to be unfold...</p>';
        }
      });
    }

    // Update wiki when page loads
    updateSecretModeWiki();
  </script>
</html>
